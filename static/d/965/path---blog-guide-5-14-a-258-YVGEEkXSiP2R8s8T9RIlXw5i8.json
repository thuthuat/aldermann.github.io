{"data":{"markdownRemark":{"html":"<h2>AntDesign</h2>\n<p>AntDesign là một thư viện UI, gồm các UI component làm sẵn như Button, InputBox, ...\nĐể sử dụng AntD cho Gatsby, ta cài đặt:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">yarn add antd gatsby-plugin-antd</code></pre></div>\n<p>Thêm <code class=\"language-text\">&#39;gatsby-plugin-antd&#39;</code> vào mục <code class=\"language-text\">plugins</code> ở file <code class=\"language-text\">gatsby-config.js</code></p>\n<p>Okay, hãy thêm vào file <code class=\"language-text\">component/header.js</code> một nút toggle để thay đổi giữa dark mode/light mode</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx harmony\"><pre class=\"language-jsx harmony\"><code class=\"language-jsx harmony\">// component/header.js\nconst Header = ({ siteTitle }) =&gt; (\n    &lt;header className={style.header}&gt;\n        &lt;div className={style.div}&gt;\n            &lt;h1 className={style.h1}&gt;\n                &lt;Link to=&quot;/&quot; className={style.Link}&gt;\n                    {siteTitle}\n                &lt;/Link&gt;\n            &lt;/h1&gt;\n            {/*Thêm dòng dưới đây*/}\n            &lt;Button\n                className={style.button}\n                icon=&quot;bulb&quot;\n                type=&quot;primary&quot;\n                shape=&quot;circle&quot;\n            /&gt;\n        &lt;/div&gt;\n    &lt;/header&gt;\n)</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token comment\">/*components/header.module.css*/</span>\n<span class=\"token comment\">/*Sửa mục này*/</span>\n<span class=\"token selector\">.h1</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/*Thêm dòng này*/</span>\n    <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> inline-block<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/*Thêm mục này*/</span>\n<span class=\"token selector\">.button</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">float</span><span class=\"token punctuation\">:</span> right<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Header page của bạn sẽ có một cái nút để đổi màu, kiểu như thế này.\n<a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e9ba79ee12e1b195708a84845142274f/0896d/button.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 44.74474474474475%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAAAkklEQVQoz62RXQrDIBCEvf+9egyhwaQPPolGTfzZaVZIaUoLkXRgcAUZvh1FzhnDcMc4TpBSIsYIFhGdNmtyhNujQtRa4b1vds6B73vgGe3PSiXETBDrukBrDaUUjDHddC/KlrwFllJgrW10fM7zkbLXbeVl6427CyEgpdS18qfE917oMHcR/vq19/ky4RX9PfAJxm3IlCufUPMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"button\"\n        title=\"\"\n        src=\"/static/e9ba79ee12e1b195708a84845142274f/b9e4f/button.png\"\n        srcset=\"/static/e9ba79ee12e1b195708a84845142274f/cf440/button.png 148w,\n/static/e9ba79ee12e1b195708a84845142274f/d2d38/button.png 295w,\n/static/e9ba79ee12e1b195708a84845142274f/b9e4f/button.png 590w,\n/static/e9ba79ee12e1b195708a84845142274f/f9b6a/button.png 885w,\n/static/e9ba79ee12e1b195708a84845142274f/0896d/button.png 999w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<h2>Viết logic cho phần đổi màu:</h2>\n<h3>React Context</h3>\n<p>Nếu ai đã làm việc với React thì sẽ biết rằng, để lưu một thông tin một cách thủ công, ví dụ như thông tin về theme hiện tại, ta phải truyền nó trên toàn bộ cây DOM. Tuy nhiên chỉ có một số thành phần lại cần đến thông tin này để render, các thành phần khác chỉ có nhiệm vụ truyền thông tin xuống.</p>\n<p>Có hai cách để giải quyết:</p>\n<ul>\n<li>Dùng Redux, toàn bộ thông tin lưu vào một store, các thành phần cần lấy thông tin sẽ hỏi store đó.</li>\n<li>Dùng React.Context, đặt một ContextProvider ở trên đỉnh của cây DOM, các thành phần cần lấy thông tin sẽ dùng ContextConsumer để hỏi. Mình sẽ sử dụng cách này vì chỉ có thông tin theme là cần truyền khắp cây DOM thôi.</li>\n</ul>\n<p>Tạo một file <code class=\"language-text\">context.js</code> với nội dung</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">const</span> ThemeContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    theme<span class=\"token punctuation\">:</span> <span class=\"token string\">\"dark\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">switchTheme</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"default\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ThemeProvider</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n    state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        theme<span class=\"token punctuation\">:</span> <span class=\"token string\">\"dark\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function-variable function\">switchTheme</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> theme <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>theme <span class=\"token operator\">===</span> <span class=\"token string\">\"dark\"</span> <span class=\"token operator\">?</span> <span class=\"token string\">\"light\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"dark\"</span>\n        localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"theme\"</span><span class=\"token punctuation\">,</span> theme<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> theme <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> theme <span class=\"token operator\">=</span> localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"theme\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">\"dark\"</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> theme <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token operator\">&lt;</span>ThemeContext<span class=\"token punctuation\">.</span>Provider\n                value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n                    theme<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>theme<span class=\"token punctuation\">,</span>\n                    switchTheme<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>switchTheme\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n            <span class=\"token operator\">></span>\n                <span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ThemeContext<span class=\"token punctuation\">.</span>Provider<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> ThemeContext\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> ThemeProvider <span class=\"token punctuation\">}</span></code></pre></div>\n<p>Sau đó, để register ContextProvider này, ta cần chỉnh sửa file <code class=\"language-text\">gatsby-browser.js</code></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx harmony\"><pre class=\"language-jsx harmony\"><code class=\"language-jsx harmony\">import React from &quot;react&quot;\n\nimport { ThemeProvider } from &quot;./src/context&quot;\n\nexport const wrapRootElement = ({ element }) =&gt; (\n    &lt;ThemeProvider&gt;{element}&lt;/ThemeProvider&gt;\n)</code></pre></div>\n<p>Bây giờ bạn có thể access hai giá trị này ở <code class=\"language-text\">component/header.js</code></p>\n<p>Sửa file này như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx harmony\"><pre class=\"language-jsx harmony\"><code class=\"language-jsx harmony\">import ThemeContext from &quot;../context&quot;\nimport { useContext } from &quot;react&quot;\n\nconst Header = ({ siteTitle }) =&gt; {\n    const { theme, switchTheme } = useContext(ThemeContext)\n    return (\n        &lt;header className={style.header}&gt;\n            &lt;div className={style.div}&gt;\n                &lt;h1 className={style.h1}&gt;\n                    &lt;Link to=&quot;/&quot; className={style.Link}&gt;\n                        {siteTitle + &quot; &quot; + theme}\n                    &lt;/Link&gt;\n                &lt;/h1&gt;\n                &lt;Button\n                    className={style.button}\n                    icon=&quot;bulb&quot;\n                    type=&quot;primary&quot;\n                    shape=&quot;circle&quot;\n                    onClick={switchTheme}\n                /&gt;\n            &lt;/div&gt;\n        &lt;/header&gt;\n    )\n}</code></pre></div>\n<p>Bây giờ, nếu bạn bấm vào nút bấm ở Header, bạn sẽ thấy dòng chữ \"dark\" và \"light\" luân phiên thay đổi.\n<a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d9671d89cf9127dd3b1f3db1103f7caf/d4d70/toggle.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 32.67634854771784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAAhklEQVQoz52QSw7DIAwFff+L5Q5dE9GgOAhQugHjxO4nqN0UnvSEF9ZoDBhjWGqt5Xk2fF8WltRauyqZVmIIIXCMkRGRnXP6voH/pOruc77FE7htqFb7/riWOu1aS0Bc1SylxDlnLqUMA+kseO/1ZDGVmYi6Tv4OfOgvUAsbsYSfT25gIzkAn00oMSnhvi8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"toggle\"\n        title=\"\"\n        src=\"/static/d9671d89cf9127dd3b1f3db1103f7caf/b9e4f/toggle.png\"\n        srcset=\"/static/d9671d89cf9127dd3b1f3db1103f7caf/cf440/toggle.png 148w,\n/static/d9671d89cf9127dd3b1f3db1103f7caf/d2d38/toggle.png 295w,\n/static/d9671d89cf9127dd3b1f3db1103f7caf/b9e4f/toggle.png 590w,\n/static/d9671d89cf9127dd3b1f3db1103f7caf/f9b6a/toggle.png 885w,\n/static/d9671d89cf9127dd3b1f3db1103f7caf/d4d70/toggle.png 964w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>Trong <a href=\"/blog-guide-6\">bài tiếp theo</a>, mình sẽ tìm cách để thông tin light và dark này thay đổi style của trang.</p>","frontmatter":{"date":"2019-04-24T00:00:00.000Z","title":"Mình đã làm trang blog này như thế nào (Phần 5)?"},"fields":{"slug":"/blog-guide-5/"}}},"pageContext":{"isCreatedByStatefulCreatePages":false}}