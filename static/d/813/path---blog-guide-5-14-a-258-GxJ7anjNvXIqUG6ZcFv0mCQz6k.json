{"data":{"markdownRemark":{"html":"<h2>AntDesign</h2>\n<p>AntDesign là một thư viện UI, gồm các UI component làm sẵn như Button, InputBox, ...\nĐể sử dụng AntD cho Gatsby, ta cài đặt:</p>\n<pre><code>yarn add antd gatsby-plugin-antd\n</code></pre>\n<p>Thêm <code>'gatsby-plugin-antd'</code> vào mục <code>plugins</code> ở file <code>gatsby-config.js</code></p>\n<p>Okay, hãy thêm vào file <code>component/header.js</code> một nút toggle để thay đổi giữa dark mode/light mode</p>\n<pre><code class=\"language-jsx\">// component/header.js\nconst Header = ({ siteTitle }) => (\n    &#x3C;header className={style.header}>\n        &#x3C;div className={style.div}>\n            &#x3C;h1 className={style.h1}>\n                &#x3C;Link to=\"/\" className={style.Link}>\n                    {siteTitle}\n                &#x3C;/Link>\n            &#x3C;/h1>\n            {/*Thêm dòng dưới đây*/}\n            &#x3C;Button\n                className={style.button}\n                icon=\"bulb\"\n                type=\"primary\"\n                shape=\"circle\"\n            />\n        &#x3C;/div>\n    &#x3C;/header>\n)\n</code></pre>\n<pre><code class=\"language-css\">/*components/header.module.css*/\n/*Sửa mục này*/\n.h1 {\n    /*Thêm dòng này*/\n    display: inline-block;\n    margin: 0;\n}\n\n/*Thêm mục này*/\n.button {\n    float: right;\n}\n</code></pre>\n<p>Header page của bạn sẽ có một cái nút để đổi màu, kiểu như thế này.\n<img src=\"button.png\" alt=\"button\"></p>\n<h2>Viết logic cho phần đổi màu:</h2>\n<h3>React Context</h3>\n<p>Nếu ai đã làm việc với React thì sẽ biết rằng, để lưu một thông tin một cách thủ công, ví dụ như thông tin về theme hiện tại, ta phải truyền nó trên toàn bộ cây DOM. Tuy nhiên chỉ có một số thành phần lại cần đến thông tin này để render, các thành phần khác chỉ có nhiệm vụ truyền thông tin xuống.</p>\n<p>Có hai cách để giải quyết:</p>\n<ul>\n<li>Dùng Redux, toàn bộ thông tin lưu vào một store, các thành phần cần lấy thông tin sẽ hỏi store đó.</li>\n<li>Dùng React.Context, đặt một ContextProvider ở trên đỉnh của cây DOM, các thành phần cần lấy thông tin sẽ dùng ContextConsumer để hỏi. Mình sẽ sử dụng cách này vì chỉ có thông tin theme là cần truyền khắp cây DOM thôi.</li>\n</ul>\n<p>Tạo một file <code>context.js</code> với nội dung</p>\n<pre><code class=\"language-js\">import React from \"react\"\nconst ThemeContext = React.createContext({\n    theme: \"dark\",\n    switchTheme: () => {\n        console.log(\"default\")\n    },\n})\nclass ThemeProvider extends React.Component {\n    state = {\n        theme: \"dark\",\n    }\n    switchTheme = () => {\n        const theme = this.state.theme === \"dark\" ? \"light\" : \"dark\"\n        localStorage.setItem(\"theme\", theme)\n        this.setState({ theme })\n    }\n    componentDidMount() {\n        const theme = localStorage.getItem(\"theme\") || \"dark\"\n        this.setState({ theme })\n    }\n    render() {\n        return (\n            &#x3C;ThemeContext.Provider\n                value={{\n                    theme: this.state.theme,\n                    switchTheme: this.switchTheme\n                }}\n            >\n                {this.props.children}\n            &#x3C;/ThemeContext.Provider>\n        )\n    }\n}\n\nexport default ThemeContext\n\nexport { ThemeProvider }\n</code></pre>\n<p>Sau đó, để register ContextProvider này, ta cần chỉnh sửa file <code>gatsby-browser.js</code></p>\n<pre><code class=\"language-jsx\">import React from \"react\"\n\nimport { ThemeProvider } from \"./src/context\"\n\nexport const wrapRootElement = ({ element }) => (\n    &#x3C;ThemeProvider>{element}&#x3C;/ThemeProvider>\n)\n</code></pre>\n<p>Bây giờ bạn có thể access hai giá trị này ở <code>component/header.js</code></p>\n<p>Sửa file này như sau:</p>\n<pre><code class=\"language-jsx\">import ThemeContext from \"../context\"\nimport { useContext } from \"react\"\n\nconst Header = ({ siteTitle }) => {\n    const { theme, switchTheme } = useContext(ThemeContext)\n    return (\n        &#x3C;header className={style.header}>\n            &#x3C;div className={style.div}>\n                &#x3C;h1 className={style.h1}>\n                    &#x3C;Link to=\"/\" className={style.Link}>\n                        {siteTitle + \" \" + theme}\n                    &#x3C;/Link>\n                &#x3C;/h1>\n                &#x3C;Button\n                    className={style.button}\n                    icon=\"bulb\"\n                    type=\"primary\"\n                    shape=\"circle\"\n                    onClick={switchTheme}\n                />\n            &#x3C;/div>\n        &#x3C;/header>\n    )\n}\n</code></pre>\n<p>Bây giờ, nếu bạn bấm vào nút bấm ở Header, bạn sẽ thấy dòng chữ \"dark\" và \"light\" luân phiên thay đổi.\n<img src=\"toggle.png\" alt=\"toggle\"></p>\n<p>Trong <a href=\"/blog-guide-6\">bài tiếp theo</a>, mình sẽ tìm cách để thông tin light và dark này thay đổi style của trang.</p>","frontmatter":{"date":"2019-04-24T00:00:00.000Z","title":"Mình đã làm trang blog này như thế nào (Phần 5)?"},"fields":{"slug":"/blog-guide-5/"}}},"pageContext":{"isCreatedByStatefulCreatePages":false}}