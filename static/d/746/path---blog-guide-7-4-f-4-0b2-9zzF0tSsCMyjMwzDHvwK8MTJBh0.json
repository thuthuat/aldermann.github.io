{"pageContext":{"isCreatedByStatefulCreatePages":false,"older":{"excerpt":"Ý tưởng để thay đổi theme.Khi thay đổi theme, ta sẽ thay đổi className của . Ứng với mỗi class sẽ có setting màu riêng dành cho page.Đầu tiên, thay đổi className của  như sau:Bây giờ, nếu ta inspect element, ta sẽ thấy class của  thay đổiCSS…","html":"<h2>Ý tưởng để thay đổi theme.</h2>\n<p>Khi thay đổi theme, ta sẽ thay đổi className của <code class=\"language-text\">&lt;body&gt;</code>. Ứng với mỗi class sẽ có setting màu riêng dành cho page.</p>\n<p>Đầu tiên, thay đổi className của <code class=\"language-text\">&lt;body&gt;</code> như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// context.js</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ThemeProvider</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">switchTheme</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> theme <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>theme <span class=\"token operator\">===</span> <span class=\"token string\">\"dark\"</span> <span class=\"token operator\">?</span> <span class=\"token string\">\"light\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"dark\"</span>\n        localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"theme\"</span><span class=\"token punctuation\">,</span> theme<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// Thêm dòng này</span>\n        document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>className <span class=\"token operator\">=</span> theme\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> theme <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> theme <span class=\"token operator\">=</span> localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"theme\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">\"dark\"</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> theme <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// Thêm dòng này</span>\n        document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>className <span class=\"token operator\">=</span> theme\n    <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Bây giờ, nếu ta inspect element, ta sẽ thấy class của <code class=\"language-text\">&lt;body&gt;</code> thay đổi</p>\n<h2>CSS-Variable</h2>\n<p>Tạo một file <code class=\"language-text\">theme.css</code> ở <code class=\"language-text\">components</code> và cho <code class=\"language-text\">layout.js</code> import nó. Điền vào file này đoạn code dưới đây.</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-css line-numbers\"><code class=\"language-css\"><span class=\"token selector\">body.light</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">--primary</span><span class=\"token punctuation\">:</span> <span class=\"token function\">hsl</span><span class=\"token punctuation\">(</span>  5<span class=\"token punctuation\">,</span> 74%<span class=\"token punctuation\">,</span> 59%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--secondary</span><span class=\"token punctuation\">:</span> <span class=\"token function\">hsl</span><span class=\"token punctuation\">(</span>221<span class=\"token punctuation\">,</span> 87%<span class=\"token punctuation\">,</span> 60%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--bg</span><span class=\"token punctuation\">:</span> <span class=\"token function\">hsl</span><span class=\"token punctuation\">(</span>230<span class=\"token punctuation\">,</span> 1%<span class=\"token punctuation\">,</span> 98%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--textTitle</span><span class=\"token punctuation\">:</span> <span class=\"token function\">hsl</span><span class=\"token punctuation\">(</span>301<span class=\"token punctuation\">,</span> 63%<span class=\"token punctuation\">,</span> 40%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--textNormal</span><span class=\"token punctuation\">:</span> <span class=\"token function\">hsl</span><span class=\"token punctuation\">(</span>230<span class=\"token punctuation\">,</span> 8%<span class=\"token punctuation\">,</span> 24%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--header</span><span class=\"token punctuation\">:</span> <span class=\"token function\">hsl</span><span class=\"token punctuation\">(</span>230<span class=\"token punctuation\">,</span> 4%<span class=\"token punctuation\">,</span> 64%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--textLinkHover</span><span class=\"token punctuation\">:</span> <span class=\"token function\">hsl</span><span class=\"token punctuation\">(</span>41<span class=\"token punctuation\">,</span> 99%<span class=\"token punctuation\">,</span> 30%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--textLink</span><span class=\"token punctuation\">:</span> <span class=\"token function\">hsl</span><span class=\"token punctuation\">(</span>41<span class=\"token punctuation\">,</span> 99%<span class=\"token punctuation\">,</span> 38%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--hr</span><span class=\"token punctuation\">:</span> <span class=\"token function\">hsl</span><span class=\"token punctuation\">(</span>198<span class=\"token punctuation\">,</span> 99%<span class=\"token punctuation\">,</span> 37%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">body.dark</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">-webkit-font-smoothing</span><span class=\"token punctuation\">:</span> antialiased<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--primary</span><span class=\"token punctuation\">:</span> <span class=\"token function\">hsl</span><span class=\"token punctuation\">(</span>355<span class=\"token punctuation\">,</span> 65%<span class=\"token punctuation\">,</span> 65%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--secondary</span><span class=\"token punctuation\">:</span> <span class=\"token function\">hsl</span><span class=\"token punctuation\">(</span>207<span class=\"token punctuation\">,</span> 82%<span class=\"token punctuation\">,</span> 66%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--bg</span><span class=\"token punctuation\">:</span> <span class=\"token function\">hsl</span><span class=\"token punctuation\">(</span>220<span class=\"token punctuation\">,</span> 13%<span class=\"token punctuation\">,</span> 18%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--textTitle</span><span class=\"token punctuation\">:</span> <span class=\"token function\">hsl</span><span class=\"token punctuation\">(</span>286<span class=\"token punctuation\">,</span> 60%<span class=\"token punctuation\">,</span> 67%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--textNormal</span><span class=\"token punctuation\">:</span> <span class=\"token function\">hsl</span><span class=\"token punctuation\">(</span>220<span class=\"token punctuation\">,</span> 14%<span class=\"token punctuation\">,</span> 71%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--header</span><span class=\"token punctuation\">:</span> <span class=\"token function\">hsl</span><span class=\"token punctuation\">(</span>220<span class=\"token punctuation\">,</span>  10%<span class=\"token punctuation\">,</span> 40%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--textLink</span><span class=\"token punctuation\">:</span> <span class=\"token function\">hsl</span><span class=\"token punctuation\">(</span> 39<span class=\"token punctuation\">,</span> 67%<span class=\"token punctuation\">,</span> 69%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--textLinkHover</span><span class=\"token punctuation\">:</span> <span class=\"token function\">hsl</span><span class=\"token punctuation\">(</span> 29<span class=\"token punctuation\">,</span> 54%<span class=\"token punctuation\">,</span> 61%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--hr</span><span class=\"token punctuation\">:</span> <span class=\"token function\">hsl</span><span class=\"token punctuation\">(</span>187<span class=\"token punctuation\">,</span> 47%<span class=\"token punctuation\">,</span> 55%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">h1</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--textTitle<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">h2, h3, h4, h5, h6</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--header<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">body</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--bg<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">a</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--textLink<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">a:hover</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--textLinkHover<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">p, div, span</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--textNormal<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">hr</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--hr<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">*</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">transition</span><span class=\"token punctuation\">:</span> color 0.5s ease-in-out<span class=\"token punctuation\">,</span> background-color 0.5s ease-in-out<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Các mục có dạng <code class=\"language-text\">--*</code> gọi là CSS variables. Những mục này không có ảnh hưởng đến style, nhưng giá trị của nó có thể được sử dụng lại cho các mục khác bằng cách gọi <code class=\"language-text\">var(tên)</code> giống như trên.</p>\n<p>Bây giờ, bạn có thể bấm vào nút bấm hình bóng đèn và thấy theme của bạn được thay đổi giữa dark mode và light mode, như thế này:\n<a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cc52b539c34037d9a9e8736c9a938c83/0901c/dark.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 63.40206185567011%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAAA3ElEQVQ4y82RzQ7CIBCE9100MVIrRSnQ0mq1/hw8qG/h0fe/jBTjT43a1pOHL0PYZdgBkiqBzTKY1CJx6MQiiBQYj702wW7q+vu7E2jqDNflHKm12K4KFMWsZljpV7zhdd3bn0GMKwxDx/jKIJRPtzZPGNxNFUYsACm5wNYesLFHxwFhZDDk0jW2mO4VoUFcppBmDqFyTCr0DELn7eK+gYTKoLMScbqAskuYvES19/iUuBPkswvj0J5wYmrvx3g36FMhiLRT7bUL9KnQ6offQL8cajDsHuunyH9jeAFjj5nFLVRPhgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"dark\"\n        title=\"\"\n        src=\"/static/cc52b539c34037d9a9e8736c9a938c83/b9e4f/dark.png\"\n        srcset=\"/static/cc52b539c34037d9a9e8736c9a938c83/cf440/dark.png 148w,\n/static/cc52b539c34037d9a9e8736c9a938c83/d2d38/dark.png 295w,\n/static/cc52b539c34037d9a9e8736c9a938c83/b9e4f/dark.png 590w,\n/static/cc52b539c34037d9a9e8736c9a938c83/0901c/dark.png 776w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a>\n<a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9d367b9b965455ffd61cf7aa73ab4d90/6e80e/light.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 63.565891472868216%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAAAxElEQVQ4y+2SzQ6CMBCE+/6v49m30IvxYoxQCrTLX0tbyViMQcEo4NnDl9lDd3aaXWZqQqM4dJFCkwiawVoL59yg33i+sdhGFszUCmVyREMcJT+gSk8jwyX0Zj2bczC0tm/sAj5whfOhfkycSzcFnQNrRAW5S5AH5F7A6hbe+8XpXjEBVpYVsjQDKYKSCnkuIYO2bfuTKSMqEMUxEiHAeYJLFIGIFi9lCrtHNWZAa716KaOEc+ewNiX7fAo/fnltw9/wjRupLfcWi62JygAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"light\"\n        title=\"\"\n        src=\"/static/9d367b9b965455ffd61cf7aa73ab4d90/b9e4f/light.png\"\n        srcset=\"/static/9d367b9b965455ffd61cf7aa73ab4d90/cf440/light.png 148w,\n/static/9d367b9b965455ffd61cf7aa73ab4d90/d2d38/light.png 295w,\n/static/9d367b9b965455ffd61cf7aa73ab4d90/b9e4f/light.png 590w,\n/static/9d367b9b965455ffd61cf7aa73ab4d90/6e80e/light.png 774w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>Okay, mình sẽ tìm cách để Gatsby load các bài blog trong <a href=\"/blog-guide-7\">bài viết sau</a>.</p>","id":"c5a881fc-1fec-55a1-9759-8a474d0f41cb","frontmatter":{"date":"2019-04-24T00:00:00.000Z","title":"Mình đã làm trang blog này như thế nào (Phần 6)?"},"fields":{"slug":"/blog-guide-6/"}},"newer":{"excerpt":"Slug Field?Slug field là một cách để tạo ra url cho một bài blog bất kỳ. Ví dụ: bài blog demo chúng ta làm trong bài trước có thể sẽ được đặt tại .Cách chúng ta sinh slug field rất đơn giản. Với tất cả các file Markdown nằm trong thư mục , chúng ta…","html":"<h2>Slug Field?</h2>\n<p>Slug field là một cách để tạo ra url cho một bài blog bất kỳ. Ví dụ: bài blog demo chúng ta làm trong bài trước có thể sẽ được đặt tại <code class=\"language-text\">http://tên-miền-blog.com/demo</code>.</p>\n<p>Cách chúng ta sinh slug field rất đơn giản. Với tất cả các file Markdown nằm trong thư mục <code class=\"language-text\">posts</code>, chúng ta sẽ thu gọn đường dẫn của nó tính từ gốc là <code class=\"language-text\">posts</code>. Ví dụ với file như sau:</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/96da0c513656424f769977c4c54c3a8a/ffc89/file.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 296px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 36.486486486486484%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAA8klEQVQoz42R3U6DQBBG+wYty0+3wCJlKwtSCgiCidELTbw0Ua98/wc5kqaJ2NTai5PZZCYn38zOXNfFsR2k79PrnJebht5LeFxuSD0fe+x7I+4Bx3F+1WNm+8ehqcOIVhuyhaR0FUq4zK0FQog9U9mfwumQsG2aruXt8wNTFLR3HVVVcdt2DMNAZszZdD8JJ+sopcjzjETHmNygtSa+iolUhFzKy4TTFRZzi0hLXr8azMOO6/uSpE7Jn2qCdYgt7AtueJRSSo91vMJXAUGsRkLCJGKl/LPpTgqt8ce17/FehuT9luK5Y1MbzLAl2aX/Cr8BmYe3lwUz92YAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"file\"\n        title=\"\"\n        src=\"/static/96da0c513656424f769977c4c54c3a8a/ffc89/file.png\"\n        srcset=\"/static/96da0c513656424f769977c4c54c3a8a/cf440/file.png 148w,\n/static/96da0c513656424f769977c4c54c3a8a/d2d38/file.png 295w,\n/static/96da0c513656424f769977c4c54c3a8a/ffc89/file.png 296w\"\n        sizes=\"(max-width: 296px) 100vw, 296px\"\n      />\n  </span>\n  </a></p>\n<p>slug field của bài blog này sẽ là <code class=\"language-text\">/blog-guide-1/</code>. Rất đơn giản</p>\n<p>Để tạo slug field, ta viết đoạn code sau vào file <code class=\"language-text\">gatsby-node.js</code></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createFilePath <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`gatsby-source-filesystem`</span></span><span class=\"token punctuation\">)</span>\n\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onCreateNode</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> getNode<span class=\"token punctuation\">,</span> actions <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createNodeField <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token string\">`MarkdownRemark`</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> slug <span class=\"token operator\">=</span> <span class=\"token function\">createFilePath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> getNode<span class=\"token punctuation\">,</span> basePath<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`posts`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n            node<span class=\"token punctuation\">,</span>\n            name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`slug`</span></span><span class=\"token punctuation\">,</span>\n            value<span class=\"token punctuation\">:</span> slug<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>Page?</h2>\n<p>Các bài blog đã được load vào và có thể truy vấn được, nhưng để xem được nó chúng ta phải tạo ra các page từ bài blog đó.</p>\n<p>Các bài blog đều có chung một bố cục, chỉ khác nhau về nội dung. Vì vậy chúng ta có thể tạo cho nó một mẫu (template) và tự động điền các thông tin của bài blog vào các vị trí thích hợp trong mỗi trang.\nTạo một thư mục ở trong <code class=\"language-text\">src</code> có tên là <code class=\"language-text\">templates</code>. Tạo trong đó một file <code class=\"language-text\">blog-post.js</code> với nội dung như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> Layout <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/layout\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> graphql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token constant\">SEO</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/seo\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Template</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> markdownRemark<span class=\"token punctuation\">:</span> post <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> data\n    <span class=\"token keyword\">const</span> time <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Layout</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SEO</span></span> <span class=\"token attr-name\">title</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>i</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>time<span class=\"token punctuation\">.</span><span class=\"token function\">toDateString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>i</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">dangerouslySetInnerHTML</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> __html<span class=\"token punctuation\">:</span> post<span class=\"token punctuation\">.</span>html <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Layout</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> query <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token string\">`\n    query($path: String!) {\n        markdownRemark(fields: { slug: { eq: $path } }) {\n            html\n            frontmatter {\n                date\n                title\n            }\n            fields {\n                slug\n            }\n        }\n    }\n`</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Bây giờ chúng ta sẽ tạo các page với template này. Điền đoạn code sau vào file <code class=\"language-text\">gatsby-node.js</code></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">)</span>\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">createPages</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> boundActionCreators<span class=\"token punctuation\">,</span> graphql <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createPage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> boundActionCreators\n    <span class=\"token keyword\">const</span> blogPostTemplate <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`src/templates/blog-post.js`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">graphql</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`\n        {\n            allMarkdownRemark(\n                sort: { order: DESC, fields: [frontmatter___date] }\n                limit: 1000\n            ) {\n                edges {\n                    node {\n                        excerpt(pruneLength: 250)\n                        html\n                        id\n                        frontmatter {\n                            date\n                            title\n                        }\n                        fields {\n                            slug\n                        }\n                    }\n                }\n            }\n        }\n    `</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">result</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">[</span><span class=\"token string\">\"errors\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">[</span><span class=\"token string\">\"errors\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n        result<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">[</span><span class=\"token string\">\"allMarkdownRemark\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"edges\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> node <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n                path<span class=\"token punctuation\">:</span> node<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">[</span><span class=\"token string\">\"slug\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                component<span class=\"token punctuation\">:</span> blogPostTemplate<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Bạn có thể cần restart lại <code class=\"language-text\">gatsby develop</code> để nó có hiệu lực.\nNếu bây giờ bạn đến địa chỉ <code class=\"language-text\">localhost:8000/demo</code>, bạn sẽ đọc được bài blog của mình.</p>\n<p>Trong <a href=\"/blog-guide-9\">bài tiếp theo</a> mình sẽ hướng dẫn bạn tạo danh sách bài viết ở trang chủ.</p>","id":"9365c0a1-04d4-5aa4-b0e8-3b6b78e0240a","frontmatter":{"date":"2019-04-26T00:00:00.000Z","title":"Mình đã làm trang blog này như thế nào (Phần 8)?"},"fields":{"slug":"/blog-guide-8/"}}}}