{"data":{"markdownRemark":{"html":"<h2>Github Pages.</h2>\n<p>Github cung cấp một dịch vụ static web host cho người dùng. Mỗi người dùng có thể tạo một trang github page cá nhân và vô số trang phụ cho mỗi repo.</p>\n<p>Với trang cá nhân, code của bạn sẽ được host ở <code class=\"language-text\">tên người dùng.github.io</code>. Github sẽ serve các file nằm trong branch master của repo có tên như trên.</p>\n<p>Để bắt đầu, tạo một Github với tên như vậy:</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7cdaeed47e5dc5518770be073876dea6/45bc0/github.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 87.33087330873308%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAAB+0lEQVQ4y51TWXLUMBScg/LNOXKKfHEFTsARUgUfIX8zVPBuy+Ndq5fmPWGbQCquCarqkWSPWt39nk+g0TQ1giBAWQokaYooivH8M8C1qjBNE8ZxPIQjzPPMVDjxT9lIBBmR5i2qtkffMwZ0Hc3DACmV3w9S+j3Pw7Cuae7oHZN6wmVZsI35z/K/BnN5hSnZLIoCzjlvMS9KRHFKzwsY48D3THTbfEC0CfOEj9+f8PD1G4I4Qd20ECJBFF4QhmdUVQYta7RdQbYLWN3A6RrWKkgtvYCNdCfkzIQQvgh1wwdIrQxhhwCGoLtnD9lc0NdnqPYHenmFaEpYZ19bbtsOhSi9up4KME4zhbzQ/A9mtg5a00x7LuxIG+uo2qtSTzjRv6x1a/kX//IV6KBbW+Ql+DmDOXZCboM4ySiv2hdGa0MXWBiGsX69tcVNVXZWI0sjJFkObQykUh5a633mxt2qeYTflkcHo5VXxgrtqlIREcO529TtlhWpCOMYGfVilCRkP/F9GYSRj4Nbw5ByjsCuMHskZo9jV2i1RSVqiKxEVXLP9cip6mle0CUCda/2w1uu7IDj0d6B+5uw0C0uXY5zmyFRtc9L0yGlOU9N7bK8z/J98AUfHu/x8ekT7s6fDz+vt7CNE3+ovVMoSeVVd2itvKmab1b5Jfutao7wCwlLLTmGQk5kAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"github\"\n        title=\"\"\n        src=\"/static/7cdaeed47e5dc5518770be073876dea6/b9e4f/github.png\"\n        srcset=\"/static/7cdaeed47e5dc5518770be073876dea6/cf440/github.png 148w,\n/static/7cdaeed47e5dc5518770be073876dea6/d2d38/github.png 295w,\n/static/7cdaeed47e5dc5518770be073876dea6/b9e4f/github.png 590w,\n/static/7cdaeed47e5dc5518770be073876dea6/45bc0/github.png 813w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>Quay trở lại project của bạn, bạn sẽ cần một package đặc biệt để thực hiện việc deploy. Chạy câu lệnh <code class=\"language-text\">yarn add --dev gh-pages</code> để cài đặt package này.</p>\n<p>Thêm dòng sau vào mục scripts ở file <code class=\"language-text\">package.json</code> </p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token property\">\"deploy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby build &amp;&amp; gh-pages -d public -b master\"</span><span class=\"token punctuation\">,</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Bây giờ, nếu bạn chạy câu lệnh <code class=\"language-text\">yarn deploy</code>, package sẽ hỏi tên đăng nhập và mật khẩu Github của bạn. Sau đó code của bạn sẽ được deploy lên đó.</p>\n<h2>Lưu code.</h2>\n<p>Để lưu code của bạn trên cùng một repo, trước tiên <code class=\"language-text\">git branch deploy</code> để tạo một branch riêng dành riêng cho việc lưu code. Sau đó <code class=\"language-text\">git checkout deploy</code> và bạn có thể commit code vào branch này. Để đẩy lên repo, chạy các câu lệnh sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\"># Câu lệnh này chỉ chạy một lần.</span>\n<span class=\"token function\">git</span> remote <span class=\"token function\">add</span> origin https://github.com/tên người dùng/tên người dùng.github.io\n\n<span class=\"token comment\"># Mỗi lần commit code và push lên ta chạy</span>\n<span class=\"token function\">git</span> commit -m <span class=\"token string\">\"Miêu tả commit ở đây\"</span>\n<span class=\"token function\">git</span> push origin deploy  </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Như vậy là bạn đã có thành công cho mình một trang blog cơ bản. Hãy học React.js thành thạo để có thể tự mình tùy biến trang web.</p>","frontmatter":{"date":"2019-04-28T00:00:00.000Z","title":"Mình đã làm trang blog này như thế nào (Phần 10)?","keyword":["react","programming","guide"],"description":"Deploy code."},"fields":{"slug":"/blog-guide/blog-guide-10/"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"older":{"html":"<p>Chúng ta đã có thể đọc các bài viết trên blog của mình, tuy nhiên một trang blog hoàn chỉnh cần có một danh sách các bài blog, thường nằm ở trang chính (index)</p>\n<p>Mở file <code class=\"language-text\">pages/index.js</code> và thay đổi nội dung của nó như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> graphql<span class=\"token punctuation\">,</span> Link <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby\"</span>\n\n<span class=\"token keyword\">import</span> Layout <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/layout\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token constant\">SEO</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/seo\"</span>\n<span class=\"token keyword\">import</span> style <span class=\"token keyword\">from</span> <span class=\"token string\">\"./index.module.css\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">IndexPage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> edges<span class=\"token punctuation\">:</span> posts <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span><span class=\"token string\">\"allMarkdownRemark\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Layout</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SEO</span></span> <span class=\"token attr-name\">title</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Home<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">keywords</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token string\">`gatsby`</span></span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token string\">`application`</span></span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token string\">`react`</span></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token punctuation\">{</span>posts\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">post</span> <span class=\"token operator\">=></span> post<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">:</span> post <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n                            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span>\n                                <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>style<span class=\"token punctuation\">[</span><span class=\"token string\">\"blogPostPreview\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></span>\n                                <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span>\n                            <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                                    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">[</span><span class=\"token string\">\"slug\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                                        </span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n                                    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>i</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>post<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toDateString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>i</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n                        <span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Layout</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> IndexPage\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token string\">`\n    query IndexQuery {\n        allMarkdownRemark(sort: { order: DESC, fields: [frontmatter___date] }) {\n            edges {\n                node {\n                    id\n                    frontmatter {\n                        title\n                        date\n                    }\n                    fields {\n                        slug\n                    }\n                }\n            }\n        }\n    }\n`</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Đồng thời thêm một file <code class=\"language-text\">index.module.css</code> ở cùng thư mục với nội dung như sau:</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-css line-numbers\"><code class=\"language-css\"><span class=\"token selector\">.blog-post-preview</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">border-bottom</span><span class=\"token punctuation\">:</span> 2px solid #e6e6e6<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">padding-top</span><span class=\"token punctuation\">:</span> 1rem<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">padding-bottom</span><span class=\"token punctuation\">:</span> 1rem<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">margin-bottom</span><span class=\"token punctuation\">:</span> 1rem<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Sau khi restart lại lệnh <code class=\"language-text\">gatsby develop</code>, bạn sẽ thấy được danh sách các bài blog của mình</p>\n<p>Vậy là trang blog của bạn coi như đã hoàn thiện. Trong bài tiếp theo, mình sẽ hướng dẫn các bạn deploy code lên netlify để sử dụng.</p>","id":"01ab3086-9929-56ff-ab37-c31b352289d1","frontmatter":{"date":"2019-04-27T00:00:00.000Z","title":"Mình đã làm trang blog này như thế nào (Phần 9)?","description":"Tạo danh sách bài blog."},"fields":{"slug":"/blog-guide/blog-guide-9/"}},"newer":{"html":"<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b193d32af569a04a3f5268ff52c465df/a8200/node_modules.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 71.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAAB4UlEQVQ4y52S7U/aUBTG+7/tL9xHPy7LPmiMToG5DJ1TBBreWgShlNaBQltoB46VUvv27N4r1whrotlJTs5zmtPffe6LEMcxaHhLFxPLYnrm2BiP7mFPpywXD3PcDQcwTQOOPWUzk8kEFpk3DJPMjhAGAZIkgQAk6Bg2Tlu3yIkSRH2EI7GJo6sq6WVkyg1kqy3snZeRJfqwWIezcFFqq9gv1NjMQaEKczZnCwmqZeO43kZdkXDeVfHhigzUFfxQblHShvja0rBXUbBb6eCk2cPpjY6srOJ6ZOFT6RpnHR35Gw3HDQU+cSn8WvqQ1A7u8+9Qrn3DxA3x4C4h9ofIyV30TRsLb4UZ+bYrdrBfVeD8cbH0H/Hb8/Cx2Mbneg+u7+MxDOmWgTAMcDeQsFq54DFw5tj53mA6jhNWL9QxMg2d6SCMWM1IOi56Y6Yjch8CvRR6mDzC6GlQm87x/qy58fMlAeakJyB1w4GXHBitgTQjAuKahrHwcNilg8nzIptA7lBLB/Kkbhl07ZrqMIr/D8hhvDLNgNHzGWa3gXIK8CUgrecOC30TX+SfrzvccJTikjvMt3QckKfDgEH4NmBacqBYa6BYqf0LVN+45e3K4+UxpD6b17bMe/pwo7Xmrrcd/gX29B/oDI6a5AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"node_modules\"\n        title=\"\"\n        src=\"/static/b193d32af569a04a3f5268ff52c465df/b9e4f/node_modules.png\"\n        srcset=\"/static/b193d32af569a04a3f5268ff52c465df/cf440/node_modules.png 148w,\n/static/b193d32af569a04a3f5268ff52c465df/d2d38/node_modules.png 295w,\n/static/b193d32af569a04a3f5268ff52c465df/b9e4f/node_modules.png 590w,\n/static/b193d32af569a04a3f5268ff52c465df/a8200/node_modules.png 700w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>It's just a meme, but not really that exaggerated. If you guys have ever work with Node.js or any other JS frameworks, which still use Node.js for their bundling or building process, you guys all knows how heavy that <code class=\"language-text\">node_modules</code> folder is. This is due to the fact, for some package in the <code class=\"language-text\">node_modules</code>, they are shipped with their own <code class=\"language-text\">node_modules</code>, making the folder buffed up with a lot of duplicated and unnecessary files.  </p>\n<p>Let me show you a little information of the <code class=\"language-text\">node_modules</code> of this blog, which is build on Gatsby.</p>\n<ul>\n<li>\n<p>To count the number of files in the folder, run:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">find</span> node_modules -type f <span class=\"token operator\">|</span> <span class=\"token function\">wc</span> -l\noutput: 41756</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>To get the total size of the folder, run: </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">du</span> -hs ./node_modules\noutput: 392M\t./node_modules</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<p>So that's basically 1/3 of a gig just for a little project. Let inspect the folder a bit so we can see why it is just way to heavy.</p>\n<p>Open up the folder, we can see there's a lot of packages that does almost nothing but a single function, aka helper function. For example, the <code class=\"language-text\">for-each</code> package, which is probably used in another package <code class=\"language-text\">parse-header</code>.\nThe whole things do only one job, run a forEach over an iterable, which, if I recall correctly, is fully implemented in the Node.js core functionalities. Yet just for that function, the whole package is shipped with another 8 files/folders, all of them do not play any role at all in my project.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2001014eb7944f1bed56b826cb8d9f92/30cfa/for-each.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 17.9144385026738%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsSAAALEgHS3X78AAAAuklEQVQY012Q6Q6DIBCEfaimkYJoWq0Hh6D2TpP+6fs/wnTB1B4/JmS/YWcXkrwakJcTit0wq/RUE6sCI23HyPOKeO2iZNdDtj2Escj3nnpmv6CshB0sRO/ARwVhzWIKPYCdDNhRIVM2Mu4N0muH1bPEZuqoz0A27jdQOA12brF+VEhvDfig44VMW7BLQ6wmphBeIusDuLmD6wtt7eft32F0xkDZutgcpoXwTPWz+acQGL7jU/tF3xu+AK3kkvsNyMESAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"for-each package\"\n        title=\"\"\n        src=\"/static/2001014eb7944f1bed56b826cb8d9f92/b9e4f/for-each.png\"\n        srcset=\"/static/2001014eb7944f1bed56b826cb8d9f92/cf440/for-each.png 148w,\n/static/2001014eb7944f1bed56b826cb8d9f92/d2d38/for-each.png 295w,\n/static/2001014eb7944f1bed56b826cb8d9f92/b9e4f/for-each.png 590w,\n/static/2001014eb7944f1bed56b826cb8d9f92/30cfa/for-each.png 748w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>Let's take a look at another example. The <code class=\"language-text\">webpack-dev-server</code> package's <code class=\"language-text\">node_modules</code> folder have a package called <code class=\"language-text\">yargs</code>, which helps CLI parse arguments. The thing is, the package <code class=\"language-text\">gatsby</code> is also shipped with <code class=\"language-text\">yargs</code> at the same version as the former. Feeling a bit confused? Let me explain in a (not-so-)simple diagram.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">    project:\n    |\n    - node_modules\n        |\n        - webpack-dev-server\n        |   |\n        |   - node_modules\n        |       |\n        |       - yargs@12.0.5\n        |\n        - gatsby\n            |\n            - node_modules\n                |\n                - yargs@12.0.5</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>As you can see, the same <code class=\"language-text\">yargs</code> package is included in two different package. Such duplication does not occur only once, if I have more times I could point out a lot more. </p>\n<p>Look at <a href=\"https://github.com/aldermann/aldermann.github.io/tree/develop\">my repo</a> yourself if you are in doubt of any information I present above. Just clone it and execute a <code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span></code>. </p>\n<h2>Solutions</h2>\n<p>Okay, so after a few Google search, I found <strong>two</strong> solutions for these two problems above.</p>\n<h3>Unnecessary files</h3>\n<p>If you have a bunch of files that does nothing and takes up disk space, what would you do?</p>\n<p><em>Delete it</em>, duh?</p>\n<p><a href=\"https://www.npmjs.com/package/modclean\">modclean</a> does just that.</p>\n<p>Let's try it out, shall we?</p>\n<p>First, run <code class=\"language-bash\"><span class=\"token function\">npm</span> -g i modclean</code>. We install it globally, because we will use it for many other projects.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/05259257a9b25a766c0536a23d9faf75/d5c82/modclean.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 22.914072229140725%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAAA80lEQVQY002QaXKEIBCFPVlm4gIoi4CAzjg1q+b+N3hptEzlx1f0q35NL0UtJzQ8ouYJTROgvjV4ZdHpBKcc+NmAsQBmyGMNStWjkZH0HZWccaodvsif30wh0w3Wv5DGH8T4gRMDeOOh7YTBeEgyiXZE6yeI4MDsAGFoCH0Dt0/U3YhKxI2SBxQ2PuGnFeG6Qg8P6PhGnwlEWmDHBSa8Nu3iAp9WuPRB18/oya/cHa2ZSVMDdUGRk56KXHrDxp2cyAi9w+gsXBEUVyKgamn9NqGkqY6VDwqhr7TCvHU64v2Dy66JXMzkuMVnOsepcn83y/o/v/KrwEyFcxOVAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"install modclean\"\n        title=\"\"\n        src=\"/static/05259257a9b25a766c0536a23d9faf75/b9e4f/modclean.png\"\n        srcset=\"/static/05259257a9b25a766c0536a23d9faf75/cf440/modclean.png 148w,\n/static/05259257a9b25a766c0536a23d9faf75/d2d38/modclean.png 295w,\n/static/05259257a9b25a766c0536a23d9faf75/b9e4f/modclean.png 590w,\n/static/05259257a9b25a766c0536a23d9faf75/d5c82/modclean.png 803w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>Then we run <code class=\"language-bash\">modclean</code>.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2d2792f6b5fb09e3f6d78c0a64f7fb43/322c1/run_modclean.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 64.38356164383562%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAABXElEQVQ4y5WTS3eDIBCF/WGNMQgYURHwkZrHSbtoN/3/69sRbKtJkzaL78wwRy53GIyS0wu2rkdZDijUAYZpFMzANjvsCg21sSibAVmrIZ1Gbg7I23cwNWDNDRLhFkRMaiSZRsxrxKnBiooxsSLRJx7ymPKYuUA65vpHjFuKltY2CHaDg+scmHTYiBEbonT+w2T60OfCLtyMImu+XEcHVqBJqyvrjxCEJ4cpJVxasCy49PGSW/WJ0M3kcC3+EJDTdfxHdBRMxIWIvCM4yze/1IJD37uhQRgf52zkOJQQwyZ7fbBcth1x1SIrn7GtBh9lsfOIkbyn2kAb2otB2JsDirJyj7w6eRSxLY9Q9RG5PkCZI0z3isKcfC2jQ4Xqvyf6Nd05Ea9rpEYTFThFQfjHO+Ny0z2XkdAGbx812qNB1ZPbppttuv3ubrY8/hXns0VVO0i1p0tuZy09/sg/AS9E4rE4Up+/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"run modclean\"\n        title=\"\"\n        src=\"/static/2d2792f6b5fb09e3f6d78c0a64f7fb43/b9e4f/run_modclean.png\"\n        srcset=\"/static/2d2792f6b5fb09e3f6d78c0a64f7fb43/cf440/run_modclean.png 148w,\n/static/2d2792f6b5fb09e3f6d78c0a64f7fb43/d2d38/run_modclean.png 295w,\n/static/2d2792f6b5fb09e3f6d78c0a64f7fb43/b9e4f/run_modclean.png 590w,\n/static/2d2792f6b5fb09e3f6d78c0a64f7fb43/322c1/run_modclean.png 876w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>Whoa. Did we just deleted 12224 folders in the blink of an eye? I will run a few commands just to see it doesn't break anything.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c6f095f9c0604cb6f69c5190835de741/578a5/nope.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 82.85340314136124%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAACn0lEQVQ4y3VU2VIbMRD076SSIkUIJICPvW9Je/vEEFOcH5GKQ/LdnZbWNhSxH9qjtTQ9PdLM9IbqCn42gx+2CKIxgqCBcCQir0CqxiiyApGjuNcizGv4SsETOYKMZ+U13HSOkP6pahAkBXqjyQRhNYVQS5TVClIskNgCvpMjETVkLBFa/A5qBKqCKwXcTMFPWnjZoiMUc6R52xEGSY1EzYgFYjVHVi7hxGNEck4VU3jpDBH3QkFLx5gBtQ25FwnuRzUGzGDoFhh6JXoJU86bFbJiCVnfICaR7ZdweXALL2poG3hxu7N+MjbQ3yNej0Ufy6dCO82goRWm+RXt3JDqtSivue7Ua0Ve3JjATlhTUW6ItmRb27NFDFskxlkrVRuVefPDkHaRS0OirR1Uu/+2eFVIQicP4OQRFAnq6T2K9naDlSGW1Q3Jqp2afareomfJFFaWmLS0Qo0k71IU1fUuxfeOh9ALY5+vm2GyeMRk/oDx7B7N9A4tIUmm+OoBHyFmgDidHFT2qtBWuIwnGOVL9FmgfZbHgGXRJ8Epa+9Mw69wFnbroXbUae/u7x3hYhjj78cv+PnxBOvP3/Dr01esj86wPrnA+sMxfh+d4uW0jxfaP8ffTdEPNqT71PaUI/A8cPBseXiyAzyNPDxatG6Eh76Lh1GEOzvB6sLF7aUP31WvKveQ9nS0oWjglzVsWcNhe9mSEDwox7BYl4O0xTlTPmeRjwKWDgvYDsr9CnWkRA+AtOAAKHn5E/MIIbugWzeGwNEkfmG64VANGkJ9qbqpQxJ6JAzS8aa1SJrpdW1IRl5urP2GaG/K+lBEhbKgUlkgUzkHQEFw2siWY2lugmTFwtj3iv5PmT9GWdIp9OMOXszvuDIKO3BAsGO293foDv8Bnax/2+NAaYEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"nope\"\n        title=\"\"\n        src=\"/static/c6f095f9c0604cb6f69c5190835de741/b9e4f/nope.png\"\n        srcset=\"/static/c6f095f9c0604cb6f69c5190835de741/cf440/nope.png 148w,\n/static/c6f095f9c0604cb6f69c5190835de741/d2d38/nope.png 295w,\n/static/c6f095f9c0604cb6f69c5190835de741/b9e4f/nope.png 590w,\n/static/c6f095f9c0604cb6f69c5190835de741/578a5/nope.png 764w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p><strong><em>Nope</em></strong></p>\n<p>Hmm, may be there's still hope. This package is claimed to have been used safely in enterprise grade applications, so maybe I'm just unlucky. Let's try it on another app of mine.</p>\n<p>It does work on my <a href=\"https://github.com/aldermann/uni_countdown\">countdown</a> app, actually. So I do encourage you guys to try it out, and should it break your app, no big deal, just remove your <code class=\"language-text\">node_modules</code> and execute a <code class=\"language-text\">npm install</code> again and you'll be fine.</p>\n<h3>Duplicate packages.</h3>\n<p>This one will be short, because it is still a new tool and is having a lot of compatibility issues, but it's still worth a few run. May I introduce to you, <a href=\"https://pnpm.js.org/\">pnpm</a>.</p>\n<p>PNPM is like, a big plugin of npm. For some functions, it pass the works down to npm. It boasts better speed than npm and yarn, which I don't think really matters. The selling point of pnpm is how it maintain the <code class=\"language-text\">node_modules</code>. They use a combination of symlinks, hardlinks and who-know-what-links, so that \"One version of a package is saved only ever once on a disk\". This effectively solves the second problem I presented above.</p>\n<p>However, being a pretty new project, it just doesn't work with some of my projects which use older tools, like this blog itself.\nAnd sadly, Webstorm doesn't support it natively, so I couldn't use it straight in the IDE. These alone deter me from using pnpm extensively. </p>\n<p>But IMO, this tool is really a good one and it's community is thriving. I think it is only a matter of time before it becomes a big deal like <code class=\"language-text\">yarn</code>. In the meantime, I guess I'll have to delete a few games to make space for my <code class=\"language-text\">node_modules</code></p>","id":"7693ce4d-cea7-52cd-826f-d6656c984c14","frontmatter":{"date":"2019-04-28T20:23:00.000Z","title":"My node_modules is too big.","description":"Some approaches to save a bit of precious disk space."},"fields":{"slug":"/node_modules-to-big/"}}}}