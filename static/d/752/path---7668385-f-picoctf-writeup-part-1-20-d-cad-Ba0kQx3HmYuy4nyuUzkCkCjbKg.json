{"data":{"markdownRemark":{"html":"<p>So basically I think it's time to try my hand on some hacking, to see if I can do it.\n<a href=\"https://2018game.picoctf.com\">PicoCTF</a> is a good site for some easy Capture The Flag (CTF) exercise according to my friends, so I guess I would start there.</p>\n<p>Okay, let's take a look at the home page. You should be able to register for an account without any problem. After signing in you can go to the <a href=\"https://2018game.picoctf.com/game\">Game tab</a>, where the game will be loaded. Then they will show some introductions so you can get comfortable with the game.</p>\n<p>You should do this on some Unix-based OS, like Linux or Mac OS, because they have a lot of useful tools pre-installed.</p>\n<p>Including too much image of the problems is going to bloat my repository, so I guess I will show image on hard problems only.</p>\n<hr>\n<h2>General Warmup 1-2-3</h2>\n<p>To solve these, just use some kind of converter like <a href=\"https://codebeautify.org/hex-string-converter\">this</a> </p>\n<hr>\n<h2>Resources</h2>\n<p>Go to the link and find the flag</p>\n<hr>\n<h2>Grep 1</h2>\n<p>Download the file. Navigate to the directory where you downloaded it on Terminal, then execute <code class=\"language-bash\"><span class=\"token function\">grep</span> <span class=\"token string\">\"picoCTF\"</span> <span class=\"token function\">file</span></code>. Voila, you can see the flag.</p>\n<hr>\n<h2>Net Cat</h2>\n<p>Okay, for this one you can run <code class=\"language-bash\"><span class=\"token function\">nc</span> 2018shell.picoctf.com 49387</code>. The flag will be printed to your console.</p>\n<hr>\n<h2>Strings</h2>\n<p>First download the file. Running a <code class=\"language-bash\"><span class=\"token function\">cat</span></code> on it shows that it is a binary file. However, running it as an executable yields nothing.</p>\n<p>However, you can use the <code class=\"language-bash\">string</code> command to find plaintext, readable strings inside the file, excluding every binary characters. By running <code class=\"language-bash\">string <span class=\"token function\">file</span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token string\">\"picoCTF\"</span></code>, you can sift through the output of <code class=\"language-bash\">string <span class=\"token function\">file</span></code> for any string contains \"picoCTF\". You can see the flag by now</p>\n<hr>\n<h2>Pipe</h2>\n<p>In the previous problem, I use a shell syntax called output piping. To put it simply, the output of the previous command will be <strong>\"piped\"</strong> to the input of the next command. </p>\n<p>In this problem, running <code class=\"language-bash\"><span class=\"token function\">nc</span> 2018shell.picoctf.com 37542</code> will yield a fast moving bunch of text. Instead of searching through this mess for the flag, we will pipe it to <code class=\"language-bash\"><span class=\"token function\">grep</span></code>, just like the previous problem.</p>\n<p>Running <code class=\"language-bash\"><span class=\"token function\">nc</span> 2018shell.picoctf.com 37542 <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token string\">\"picoCTF\"</span></code> will show you the flag.</p>\n<hr>\n<h2>Grep 2.</h2>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/47f86fb6faf52eb3f4c55639d3c721b9/374ce/grep2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 81.76197836166925%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAACiElEQVQ4y5VUuW4TURSdCgGOl9m8jMeze+yE2Ikdx8IJGAI4KAI6JKSAIBINEAlBQRIkBBUFiyiAKiyiATp+8XDem7ETEwlBcXTufe/OuduzlUarDTtsEDHsqJHaDdRoV4I6rLk2/M4ywm6f9gIsnrvxLJx6kyDTrvoR+sM13HuyC6XseCgHMcL5RfizLUStDiLa4XwHAcUW+ito906jOziLiL7pRii6IUwv4aJXh1Z1UfLriBd7FGRlcbuL1QsjrKyN0DtzDt2VIQZrl9BaHiBeWJJoMFh8UGdCmZzioUy8CJuVFiwHWqUGJcvqDNuDXgtgOAHZh+6EklXbR45BhaqHPDlPFh+q9lHWUyj5oAGdJWsU0HigUViwLsQpaLiJ+Jh1weI+ZcNJfcZOBMcVTsP/D/aloJYINqFZLkt3obIl1XJllTKjzJ6wNvG9oyzjvUQwyy3VoqYcvNwwFyS2d1j0r2JOMBGVgjm2bLLk0vgZMNAYt3FkDP/astimyMgHrXPrBb4pVfjMrh3a+uERTHHaslxKhpUVwiaOdQcoDkcon1/H8d4qMnMdmBQ0OBKxyYSDCZtTvugqQI7FKSdZkVqykFFNzGgmMsSMXqRdTPnAz0z5jFWNCfLFCnL1U1BOsJW54To2Hj3HaHsPowd7Ke8mPMb9nYNzYn37KTYev8Dlh89wZecl5i9eRb5sQynYLpau3cDWx5/YfP0JN99+Jb5g883niS/tFNJ/tY9b777hzocfuP3+O+7u/0L/+hYKrFJxohjZooWsUUbWHKOSgAF53k3A0STnloybMUoJOIJ8qcqluFBqYV0+mTI3+yfEP4gmNsl7+VPzktgKX4OMCVL2Y5SFhhfiN/Rt0N+EGwRjAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Grep 2\"\n        title=\"\"\n        src=\"/static/47f86fb6faf52eb3f4c55639d3c721b9/b9e4f/grep2.png\"\n        srcset=\"/static/47f86fb6faf52eb3f4c55639d3c721b9/cf440/grep2.png 148w,\n/static/47f86fb6faf52eb3f4c55639d3c721b9/d2d38/grep2.png 295w,\n/static/47f86fb6faf52eb3f4c55639d3c721b9/b9e4f/grep2.png 590w,\n/static/47f86fb6faf52eb3f4c55639d3c721b9/374ce/grep2.png 647w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>This problem will requires you to use the web-shell. Go to the <a href=\"https://2018game.picoctf.com/shell\">Shell tab</a>, you will see a command prompt.</p>\n<p><code class=\"language-bash\"><span class=\"token function\">cd</span></code> to the directory given by the problems, then <code class=\"language-bash\"><span class=\"token function\">ls</span></code>, you'll be greeted by a bunch of directory. Traversing all of them by hand and check if there is any file contains the flag is not feasible. </p>\n<p>However, <code class=\"language-bash\"><span class=\"token function\">grep</span></code> has an option <code class=\"language-text\">-R</code> which search the strings given recursively, and this is what we'll use. Executing <code class=\"language-bash\"><span class=\"token function\">grep</span> -R <span class=\"token string\">\"picoCTF\"</span></code> will give you the flag.</p>\n<hr>\n<h2>ACA-Shell-A</h2>\n<p>This one is an interesting one, as you will be put in a interactive and narrated shell. It's just like a game on terminal.</p>\n<p>First, execute the command in the problem's instruction.</p>\n<p>The narrator says that you can ask for help by running <code class=\"language-bash\"><span class=\"token keyword\">echo</span> <span class=\"token string\">'Help Me!'</span></code>. Sweet. Let's try it since we don't really know what to do.</p>\n<p>The narrator reply with <code class=\"language-text\">Have you looked for any directory</code>. Let's try a <code class=\"language-bash\"><span class=\"token function\">ls</span></code> first</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">~/$ <span class=\"token function\">ls</span>\nblackmail\nexecutables\npasswords\nphotos\nsecret</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Sweet. You can poke around in these directories, but what you need is in <code class=\"language-text\">secret</code>. Let's <code class=\"language-bash\"><span class=\"token function\">cd</span></code> into it.</p>\n<p>A <code class=\"language-bash\"><span class=\"token function\">ls</span></code> reveals a bunch of files. The shell then asks you to sabotage the intel files. In order to delete them in a single command, run <code class=\"language-bash\"> <span class=\"token function\">rm</span> intel_*</code></p>\n<p>The narrator will then tell you to run <code class=\"language-bash\"><span class=\"token keyword\">echo</span> <span class=\"token string\">'Drop it in!'</span></code>. Run it, and there will be a new file in the <code class=\"language-text\">~/executables</code> directory. <code class=\"language-bash\"><span class=\"token function\">cd</span></code> to it, then <code class=\"language-bash\"><span class=\"token function\">ls</span></code> to see what's the file name. </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">~/executables$ <span class=\"token function\">ls</span>\ndontLookHere</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>The <code class=\"language-text\">dontLookHere</code> file is an executable, means that you can run it by typing <code class=\"language-text\">./dontLookHere</code>. The screen will print out some hex code, and then the narrator will ask you to find the username. Typing <code class=\"language-text\">whoami</code> will give you the username.</p>\n<p>The narrator will finally say that you have to copy a file in <code class=\"language-text\">tmp</code> called <code class=\"language-text\">TopSecret</code> to the <code class=\"language-text\">passwords</code> directory. In Linux, the <code class=\"language-text\">tmp</code> directory resides in root, aka <code class=\"language-text\">/</code>. So you should issue the following command: </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">~/executables$ <span class=\"token function\">cp</span> /tmp/TopSecret <span class=\"token punctuation\">..</span>/passwords\n<span class=\"token punctuation\">..</span>/password: directory not found or permitted</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>What?\nLet's ask the narrator to see if he has any clue.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">~/executables$ <span class=\"token keyword\">echo</span> <span class=\"token string\">\"Help Me!\"</span>\nYou are going to have to <span class=\"token keyword\">do</span> it from the home folder because of the <span class=\"token string\">\"..\"</span> restrictions<span class=\"token operator\">!</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Oh okay, let's try again. <code class=\"language-bash\"><span class=\"token function\">cd</span> <span class=\"token punctuation\">..</span></code> to get back to the home folder, then <code class=\"language-bash\"><span class=\"token function\">cp</span> /tmp/TopSecret passwords</code> to copy the file. It does work this time.</p>\n<p>The narrator will then says that the server will shut down in 10 seconds, and you must read the file quickly. Just run <code class=\"language-bash\"><span class=\"token function\">cd</span> passwords</code> then <code class=\"language-bash\"><span class=\"token function\">cat</span> TopSecret</code>. You will see the flag for this problem.</p>\n<hr>\n<h2>Environ</h2>\n<p>This is going to be easy. Open the web-shell, then execute <code class=\"language-bash\"><span class=\"token function\">env</span></code>\nThe command will show you all the environment variables on the shell. In order to find the flag easily, pipe it to <code class=\"language-bash\"><span class=\"token function\">grep</span></code></p>\n<hr>\n<h2>SSH-Keyz.</h2>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e0926d3c91313c6bacfa84fd8722aa54/82704/ssh-key.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 82.16463414634147%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAACu0lEQVQ4y31UXW/SYBTuxbIwKWOFQgvjox98D0oLgwGDMSTbvDHxD8zMOGNMjNmMMTEx/gU1JrvwTo2J3vgXH89531KIF148ec4573mfno+2ilGyYFgVuAddWI027JYHq9mB2/ZR6/TgDyfoj6Y4nJygNzqmPF/kVumM2Wl1oeVLcNoBvNEESt6tCpHp8hyD2QKj0yUOp6eYLM5wNL8PfzxFn/xgPCN7huHJQsT7x3PKm4s7ncEYiWyeCnOhxO0qCm4djWAgqmr4h6jQ02vdPj3VR6bswnBqyFIXptuASfmGLf0c3ePu2Nf3LSQoT0k4daT3y9AKFjQKMqeIUwVb+KmiQ7ZkjfKEv7/p24LTLEgPiwRZIF1yJIrO2v4fimvoK0GVBA1uixxRoahSPjXi4j9+yKnIt5CmxSSodeVeuQKHtsoD55nZtDle0ordTiA335I+b9PZOLfYJpg0S9Wq8lJqYil1r4c8VctDz9FwGWbIwrbXMZPyzei8LpaTpbaFIM+Qh56gwG7JRZLa36Wq93joJY45SFKiiBPvUftyEVa0EB7BRssuNBLd9ocwZ0sUFheI9cZQGx60ShNb3gD65BQGnbGtNrvIkJBO4joVINkR9g5pKTvUu5YrIp42oGZMqDohkyM2JNgWoDi9vFE8lUGcoekCWq6EGAvGSjZqR3OcvXiL+89eE24lX99I+3qFmw37Fsvnb3Dx6j3OXr7Dg5sPqA5niFHlSpK+Ze/8EZ7c/cblp++4/PxDssC30A/545off/mJK7pzdfcLT7/+QXv5EMliGUqxUsMutRLfS0flxzXZjroB0V4qG8azMo/vCKSERoH+C0rOdsWnJAe7gdUXwDZtXSyAOB35zG60ENYw+efgeF3Ugz6qPv0QQrDNMcsPsFVrYbt+gO3GAdlN2OFZNQjzg3W+3fHwFzOB16NRwbF5AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Ssh Key\"\n        title=\"\"\n        src=\"/static/e0926d3c91313c6bacfa84fd8722aa54/b9e4f/ssh-key.png\"\n        srcset=\"/static/e0926d3c91313c6bacfa84fd8722aa54/cf440/ssh-key.png 148w,\n/static/e0926d3c91313c6bacfa84fd8722aa54/d2d38/ssh-key.png 295w,\n/static/e0926d3c91313c6bacfa84fd8722aa54/b9e4f/ssh-key.png 590w,\n/static/e0926d3c91313c6bacfa84fd8722aa54/82704/ssh-key.png 656w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>This is a very compicated problem and requires some knowledges in SSH and how it handles authentication keys. You can possibly skips the work and grab the flags by executing <code class=\"language-bash\"><span class=\"token function\">ssh</span> 2018shell.picoctf.com@your_picoctf_username</code> and enter the password. However, I'll describe about the authentication key approach, because afterward you can SSH to the server without having to enter the password. </p>\n<p>SSH Key Authentication work like this: </p>\n<ul>\n<li>In order to authenticate, you must own a key pair, one is public and the other private. The private key can be used to decode any data that is encoded using the public key, but the other way around doesn't work. </li>\n<li>When a client (your computer) send a request to connect to the host (the game's shell server) with a key, first the host will search for a public key that belongs to the client. </li>\n<li>If a public key is found, the host will use it to encrypt a code, and send it to the client. The client will use the private key to decrypt the code, and send it back to the host. If the host see that the code sent match with the code received, it will establish a connection.</li>\n</ul>\n<p>First you have to generate a key pair. It's really simple. Execute <code class=\"language-bash\">ssh-keygen -C <span class=\"token string\">\"vietanisme@gmail.com\"</span> -t rsa</code> on your machine. If you are asked  whether to overwrite a file, you can specified a directory to put the key.</p>\n<p>After generating the key, you can just copy the public key to the host. First open the public key file and copy the content of it.\nOpen the webshell and run:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">    <span class=\"token keyword\">echo</span> <span class=\"token string\">\"the content of the public key\"</span> <span class=\"token operator\">></span> ~/.ssh/authorized_keys</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Close the webshell. Open a terminal on your computer and run <code class=\"language-bash\"><span class=\"token function\">ssh</span> 2018shell.picoctf.com@your_picoctf_username</code>. If all the steps above is done correctly, you should be able to login to the server without having to input password. The flag will be given on login.</p>\n<hr>\n<p>Okay that's enough for a blog post. Remember to check back for Part 2</p>","frontmatter":{"date":"2019-05-02T18:07:00.000Z","title":"PicoCTF 2018 Writeup Part 1.","keyword":["ctf","hacking"]},"fields":{"slug":"/7668385f/picoctf-writeup/part1/"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"older":{"html":"<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b193d32af569a04a3f5268ff52c465df/a8200/node_modules.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 71.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAAB4UlEQVQ4y52S7U/aUBTG+7/tL9xHPy7LPmiMToG5DJ1TBBreWgShlNaBQltoB46VUvv27N4r1whrotlJTs5zmtPffe6LEMcxaHhLFxPLYnrm2BiP7mFPpywXD3PcDQcwTQOOPWUzk8kEFpk3DJPMjhAGAZIkgQAk6Bg2Tlu3yIkSRH2EI7GJo6sq6WVkyg1kqy3snZeRJfqwWIezcFFqq9gv1NjMQaEKczZnCwmqZeO43kZdkXDeVfHhigzUFfxQblHShvja0rBXUbBb6eCk2cPpjY6srOJ6ZOFT6RpnHR35Gw3HDQU+cSn8WvqQ1A7u8+9Qrn3DxA3x4C4h9ofIyV30TRsLb4UZ+bYrdrBfVeD8cbH0H/Hb8/Cx2Mbneg+u7+MxDOmWgTAMcDeQsFq54DFw5tj53mA6jhNWL9QxMg2d6SCMWM1IOi56Y6Yjch8CvRR6mDzC6GlQm87x/qy58fMlAeakJyB1w4GXHBitgTQjAuKahrHwcNilg8nzIptA7lBLB/Kkbhl07ZrqMIr/D8hhvDLNgNHzGWa3gXIK8CUgrecOC30TX+SfrzvccJTikjvMt3QckKfDgEH4NmBacqBYa6BYqf0LVN+45e3K4+UxpD6b17bMe/pwo7Xmrrcd/gX29B/oDI6a5AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"node_modules\"\n        title=\"\"\n        src=\"/static/b193d32af569a04a3f5268ff52c465df/b9e4f/node_modules.png\"\n        srcset=\"/static/b193d32af569a04a3f5268ff52c465df/cf440/node_modules.png 148w,\n/static/b193d32af569a04a3f5268ff52c465df/d2d38/node_modules.png 295w,\n/static/b193d32af569a04a3f5268ff52c465df/b9e4f/node_modules.png 590w,\n/static/b193d32af569a04a3f5268ff52c465df/a8200/node_modules.png 700w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>It's just a meme, but not really that exaggerated. If you guys have ever work with Node.js or any other JS frameworks, which still use Node.js for their bundling or building process, you guys all knows how heavy that <code class=\"language-text\">node_modules</code> folder is. This is due to the fact, for some package in the <code class=\"language-text\">node_modules</code>, they are shipped with their own <code class=\"language-text\">node_modules</code>, making the folder buffed up with a lot of duplicated and unnecessary files.  </p>\n<p>Let me show you a little information of the <code class=\"language-text\">node_modules</code> of this blog, which is build on Gatsby.</p>\n<ul>\n<li>\n<p>To count the number of files in the folder, run:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">find</span> node_modules -type f <span class=\"token operator\">|</span> <span class=\"token function\">wc</span> -l\noutput: 41756</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>To get the total size of the folder, run: </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">du</span> -hs ./node_modules\noutput: 392M\t./node_modules</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<p>So that's basically 1/3 of a gig just for a little project. Let inspect the folder a bit so we can see why it is just way to heavy.</p>\n<p>Open up the folder, we can see there's a lot of packages that does almost nothing but a single function, aka helper function. For example, the <code class=\"language-text\">for-each</code> package, which is probably used in another package <code class=\"language-text\">parse-header</code>.\nThe whole things do only one job, run a forEach over an iterable, which, if I recall correctly, is fully implemented in the Node.js core functionalities. Yet just for that function, the whole package is shipped with another 8 files/folders, all of them do not play any role at all in my project.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2001014eb7944f1bed56b826cb8d9f92/30cfa/for-each.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 17.9144385026738%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsSAAALEgHS3X78AAAAuklEQVQY012Q6Q6DIBCEfaimkYJoWq0Hh6D2TpP+6fs/wnTB1B4/JmS/YWcXkrwakJcTit0wq/RUE6sCI23HyPOKeO2iZNdDtj2Escj3nnpmv6CshB0sRO/ARwVhzWIKPYCdDNhRIVM2Mu4N0muH1bPEZuqoz0A27jdQOA12brF+VEhvDfig44VMW7BLQ6wmphBeIusDuLmD6wtt7eft32F0xkDZutgcpoXwTPWz+acQGL7jU/tF3xu+AK3kkvsNyMESAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"for-each package\"\n        title=\"\"\n        src=\"/static/2001014eb7944f1bed56b826cb8d9f92/b9e4f/for-each.png\"\n        srcset=\"/static/2001014eb7944f1bed56b826cb8d9f92/cf440/for-each.png 148w,\n/static/2001014eb7944f1bed56b826cb8d9f92/d2d38/for-each.png 295w,\n/static/2001014eb7944f1bed56b826cb8d9f92/b9e4f/for-each.png 590w,\n/static/2001014eb7944f1bed56b826cb8d9f92/30cfa/for-each.png 748w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>Let's take a look at another example. The <code class=\"language-text\">webpack-dev-server</code> package's <code class=\"language-text\">node_modules</code> folder have a package called <code class=\"language-text\">yargs</code>, which helps CLI parse arguments. The thing is, the package <code class=\"language-text\">gatsby</code> is also shipped with <code class=\"language-text\">yargs</code> at the same version as the former. Feeling a bit confused? Let me explain in a (not-so-)simple diagram.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">    project:\n    |\n    - node_modules\n        |\n        - webpack-dev-server\n        |   |\n        |   - node_modules\n        |       |\n        |       - yargs@12.0.5\n        |\n        - gatsby\n            |\n            - node_modules\n                |\n                - yargs@12.0.5</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>As you can see, the same <code class=\"language-text\">yargs</code> package is included in two different package. Such duplication does not occur only once, if I have more times I could point out a lot more. </p>\n<p>Look at <a href=\"https://github.com/aldermann/aldermann.github.io/tree/develop\">my repo</a> yourself if you are in doubt of any information I present above. Just clone it and execute a <code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span></code>. </p>\n<h2>Solutions</h2>\n<p>Okay, so after a few Google search, I found <strong>two</strong> solutions for these two problems above.</p>\n<h3>Unnecessary files</h3>\n<p>If you have a bunch of files that does nothing and takes up disk space, what would you do?</p>\n<p><em>Delete it</em>, duh?</p>\n<p><a href=\"https://www.npmjs.com/package/modclean\">modclean</a> does just that.</p>\n<p>Let's try it out, shall we?</p>\n<p>First, run <code class=\"language-bash\"><span class=\"token function\">npm</span> -g i modclean</code>. We install it globally, because we will use it for many other projects.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/05259257a9b25a766c0536a23d9faf75/d5c82/modclean.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 22.914072229140725%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAAA80lEQVQY002QaXKEIBCFPVlm4gIoi4CAzjg1q+b+N3hptEzlx1f0q35NL0UtJzQ8ouYJTROgvjV4ZdHpBKcc+NmAsQBmyGMNStWjkZH0HZWccaodvsif30wh0w3Wv5DGH8T4gRMDeOOh7YTBeEgyiXZE6yeI4MDsAGFoCH0Dt0/U3YhKxI2SBxQ2PuGnFeG6Qg8P6PhGnwlEWmDHBSa8Nu3iAp9WuPRB18/oya/cHa2ZSVMDdUGRk56KXHrDxp2cyAi9w+gsXBEUVyKgamn9NqGkqY6VDwqhr7TCvHU64v2Dy66JXMzkuMVnOsepcn83y/o/v/KrwEyFcxOVAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"install modclean\"\n        title=\"\"\n        src=\"/static/05259257a9b25a766c0536a23d9faf75/b9e4f/modclean.png\"\n        srcset=\"/static/05259257a9b25a766c0536a23d9faf75/cf440/modclean.png 148w,\n/static/05259257a9b25a766c0536a23d9faf75/d2d38/modclean.png 295w,\n/static/05259257a9b25a766c0536a23d9faf75/b9e4f/modclean.png 590w,\n/static/05259257a9b25a766c0536a23d9faf75/d5c82/modclean.png 803w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>Then we run <code class=\"language-bash\">modclean</code>.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2d2792f6b5fb09e3f6d78c0a64f7fb43/322c1/run_modclean.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 64.38356164383562%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAABXElEQVQ4y5WTS3eDIBCF/WGNMQgYURHwkZrHSbtoN/3/69sRbKtJkzaL78wwRy53GIyS0wu2rkdZDijUAYZpFMzANjvsCg21sSibAVmrIZ1Gbg7I23cwNWDNDRLhFkRMaiSZRsxrxKnBiooxsSLRJx7ymPKYuUA65vpHjFuKltY2CHaDg+scmHTYiBEbonT+w2T60OfCLtyMImu+XEcHVqBJqyvrjxCEJ4cpJVxasCy49PGSW/WJ0M3kcC3+EJDTdfxHdBRMxIWIvCM4yze/1IJD37uhQRgf52zkOJQQwyZ7fbBcth1x1SIrn7GtBh9lsfOIkbyn2kAb2otB2JsDirJyj7w6eRSxLY9Q9RG5PkCZI0z3isKcfC2jQ4Xqvyf6Nd05Ea9rpEYTFThFQfjHO+Ny0z2XkdAGbx812qNB1ZPbppttuv3ubrY8/hXns0VVO0i1p0tuZy09/sg/AS9E4rE4Up+/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"run modclean\"\n        title=\"\"\n        src=\"/static/2d2792f6b5fb09e3f6d78c0a64f7fb43/b9e4f/run_modclean.png\"\n        srcset=\"/static/2d2792f6b5fb09e3f6d78c0a64f7fb43/cf440/run_modclean.png 148w,\n/static/2d2792f6b5fb09e3f6d78c0a64f7fb43/d2d38/run_modclean.png 295w,\n/static/2d2792f6b5fb09e3f6d78c0a64f7fb43/b9e4f/run_modclean.png 590w,\n/static/2d2792f6b5fb09e3f6d78c0a64f7fb43/322c1/run_modclean.png 876w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>Whoa. Did we just deleted 12224 folders in the blink of an eye? I will run a few commands just to see it doesn't break anything.</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c6f095f9c0604cb6f69c5190835de741/578a5/nope.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 82.85340314136124%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAACn0lEQVQ4y3VU2VIbMRD076SSIkUIJICPvW9Je/vEEFOcH5GKQ/LdnZbWNhSxH9qjtTQ9PdLM9IbqCn42gx+2CKIxgqCBcCQir0CqxiiyApGjuNcizGv4SsETOYKMZ+U13HSOkP6pahAkBXqjyQRhNYVQS5TVClIskNgCvpMjETVkLBFa/A5qBKqCKwXcTMFPWnjZoiMUc6R52xEGSY1EzYgFYjVHVi7hxGNEck4VU3jpDBH3QkFLx5gBtQ25FwnuRzUGzGDoFhh6JXoJU86bFbJiCVnfICaR7ZdweXALL2poG3hxu7N+MjbQ3yNej0Ufy6dCO82goRWm+RXt3JDqtSivue7Ua0Ve3JjATlhTUW6ItmRb27NFDFskxlkrVRuVefPDkHaRS0OirR1Uu/+2eFVIQicP4OQRFAnq6T2K9naDlSGW1Q3Jqp2afareomfJFFaWmLS0Qo0k71IU1fUuxfeOh9ALY5+vm2GyeMRk/oDx7B7N9A4tIUmm+OoBHyFmgDidHFT2qtBWuIwnGOVL9FmgfZbHgGXRJ8Epa+9Mw69wFnbroXbUae/u7x3hYhjj78cv+PnxBOvP3/Dr01esj86wPrnA+sMxfh+d4uW0jxfaP8ffTdEPNqT71PaUI/A8cPBseXiyAzyNPDxatG6Eh76Lh1GEOzvB6sLF7aUP31WvKveQ9nS0oWjglzVsWcNhe9mSEDwox7BYl4O0xTlTPmeRjwKWDgvYDsr9CnWkRA+AtOAAKHn5E/MIIbugWzeGwNEkfmG64VANGkJ9qbqpQxJ6JAzS8aa1SJrpdW1IRl5urP2GaG/K+lBEhbKgUlkgUzkHQEFw2siWY2lugmTFwtj3iv5PmT9GWdIp9OMOXszvuDIKO3BAsGO293foDv8Bnax/2+NAaYEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"nope\"\n        title=\"\"\n        src=\"/static/c6f095f9c0604cb6f69c5190835de741/b9e4f/nope.png\"\n        srcset=\"/static/c6f095f9c0604cb6f69c5190835de741/cf440/nope.png 148w,\n/static/c6f095f9c0604cb6f69c5190835de741/d2d38/nope.png 295w,\n/static/c6f095f9c0604cb6f69c5190835de741/b9e4f/nope.png 590w,\n/static/c6f095f9c0604cb6f69c5190835de741/578a5/nope.png 764w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p><strong><em>Nope</em></strong></p>\n<p>Hmm, may be there's still hope. This package is claimed to have been used safely in enterprise grade applications, so maybe I'm just unlucky. Let's try it on another app of mine.</p>\n<p>It does work on my <a href=\"https://github.com/aldermann/uni_countdown\">countdown</a> app, actually. So I do encourage you guys to try it out, and should it break your app, no big deal, just remove your <code class=\"language-text\">node_modules</code> and execute a <code class=\"language-text\">npm install</code> again and you'll be fine.</p>\n<h3>Duplicate packages.</h3>\n<p>This one will be short, because it is still a new tool and is having a lot of compatibility issues, but it's still worth a few run. May I introduce to you, <a href=\"https://pnpm.js.org/\">pnpm</a>.</p>\n<p>PNPM is like, a big plugin of npm. For some functions, it pass the works down to npm. It boasts better speed than npm and yarn, which I don't think really matters. The selling point of pnpm is how it maintain the <code class=\"language-text\">node_modules</code>. They use a combination of symlinks, hardlinks and who-know-what-links, so that \"One version of a package is saved only ever once on a disk\". This effectively solves the second problem I presented above.</p>\n<p>However, being a pretty new project, it just doesn't work with some of my projects which use older tools, like this blog itself.\nAnd sadly, Webstorm doesn't support it natively, so I couldn't use it straight in the IDE. These alone deter me from using pnpm extensively. </p>\n<p>But IMO, this tool is really a good one and it's community is thriving. I think it is only a matter of time before it becomes a big deal like <code class=\"language-text\">yarn</code>. In the meantime, I guess I'll have to delete a few games to make space for my <code class=\"language-text\">node_modules</code></p>","id":"7693ce4d-cea7-52cd-826f-d6656c984c14","frontmatter":{"date":"2019-04-28T20:23:00.000Z","title":"My node_modules is too big.","description":"Some approaches to save a bit of precious disk space."},"fields":{"slug":"/7693ce4d/node_modules-to-big/"}},"newer":null}}